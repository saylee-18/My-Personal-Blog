<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Post</title>
</head>

<body>
    <%- include("partials/header.ejs") %>
        <div>
            <% if(locals.posts && locals.posts.length> 0){ %>
                <% posts.forEach(p=> { %>
                    <form action="/edit/<%= p.id %>" enctype='multipart/form-data' method="POST">
                        <input type="text" name="caption" value="<%= p.caption %>"
                            placeholder="Edit caption for your post" required maxlength="50"> <br>
                        <textarea name="blog" placeholder="Edit text here" required
                            maxlength="250"><%= p.blog %></textarea> <br>
                        <img id="previewImage" src="<%= p.imageUrl %>" width="200" />
                        <input type="file" id="imageUpload" name="image" required hidden>
                        <label for="imageUpload" class="custom-file-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor"
                                class="bi bi-upload" viewBox="0 0 20 20">
                                <path
                                    d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                                <path
                                    d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z" />
                            </svg>
                        </label>
                        <span id="fileName">No file selected</span><br>
                        <input type="submit" value="Update">
                    </form>
                    <% }) %>
                        <% } else { %>
                            <h2> No Data </h2>
                            <% } %>
        </div>
        <%- include("partials/footer.ejs") %>

            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
            <script src="/filenameChange.js"></script>
</body>

</html>